{
    "requiresCompatibilities": [
        "FARGATE"
    ],
    "runtimePlatform": {
        "operatingSystemFamily": "LINUX",
        "cpuArchitecture": "ARM64"
    },
    "family": "airflow",
    "memory": "4 GB",
    "cpu": "2 vCPU",
    "executionRoleArn": "arn:aws:iam::145723653607:role/ecsTaskExecutionRole",
    "networkMode": "awsvpc",
    "containerDefinitions": [
        {
            "name": "postgres",
            "image": "postgres:13",
            "essential": true,
            "environment": [
              {
                "name": "POSTGRES_USER",
                "value": "airflow"
              },
              {
                "name": "POSTGRES_PASSWORD",
                "value": "airflow"
              },
              {"name": "POSTGRES_DB",
              "value": "airflow"
              }
            ],
            "healthCheck": {
              "command": ["CMD", "pg_isready", "-U", "airflow"],
              "startPeriod": 10,
              "retries": 10,
              "interval": 10
            },
            "mountPoints": [
              {
                "sourceVolume": "postgres-db-volume",
                "containerPath": "/var/lib/postgresql/data"
              }
            ],
            "logConfiguration": {
                "logDriver": "awslogs",
                "options": {
                    "awslogs-group": "/ecs/airflow",
                    "awslogs-region": "ap-southeast-2",
                    "awslogs-stream-prefix": "ecs"
                }
            }
            
          }]
}